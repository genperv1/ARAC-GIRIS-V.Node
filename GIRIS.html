<!DOCTYPE html>
<html lang="tr">
    <head>
        <link rel="icon" type="image/png" href="https://i.hizliresim.com/5w96wuo.png">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script>
            (function(){
                try{ if (localStorage.getItem('isLoggedIn') === 'true') document.documentElement.classList.add('logged-in'); }catch(e){}
            })();
        </script>
        <style>
            .logged-in #loginScreen{ display: none !important; }
            .logged-in #mainApp{ display: block !important; }
            .logged-in #loginLoading{ display: none !important; }
        </style>
        <title>Ara√ß Plaka Takip Sistemi</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body class="bg-gray-50 min-h-screen text-gray-700">


        <!-- Giri≈ü Ekranƒ± -->
        <div id="loginScreen" class="min-h-screen flex items-center justify-center p-6">
            <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
                <div class="text-center mb-6">
                    <img src="https://i.hizliresim.com/5w96wuo.png" alt="logo" class="mx-auto mb-4 w-36 h-28 object-contain">
                    <h1 class="text-2xl font-bold text-gray-800 mb-1">Ara√ß Plaka Takip</h1>
                    <p class="text-sm text-gray-500">Sisteme giri≈ü yapƒ±n</p>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Kullanƒ±cƒ± ID</label>
                        <input type="text" id="loginId" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400" placeholder="ID giriniz" autocomplete="off">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">≈ûifre</label>
                        <input type="password" id="loginPassword" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400" placeholder="≈ûifre giriniz" autocomplete="off">
                    </div>

                    <button id="loginButton" class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 font-semibold">Giri≈ü Yap</button>
                </div>

                <div id="loginError" class="mt-4 text-center text-sm text-red-600 hidden">Hatalƒ± ID veya ≈ûifre!</div>

                <div class="mt-6 text-center text-xs text-gray-500">üîê G√ºvenli Giri≈ü Sistemi</div>
            </div>
        </div>

        <!-- Ana Uygulama -->
        <div id="mainApp" style="display: none;" class="p-4"></div>

        <!-- Takip Formu Modal -->
        <div id="takipFormuModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 pt-8 z-50 hidden">
            <div class="bg-white rounded-lg max-w-5xl w-full max-h-[92vh] overflow-auto shadow-xl">
                <div class="p-4 border-b flex justify-between items-center sticky top-0 bg-white z-10">
                    <h2 class="text-xl font-bold">Sevkiyat Y√ºklemesi Takip Formu</h2>
                    <div class="flex gap-2">
                        <button id="yazdirButton" class="bg-indigo-600 text-white px-4 py-2 rounded">Yazdƒ±r</button>
                        <button id="onizlemeButton" class="bg-slate-600 text-white px-4 py-2 rounded">√ñnizleme</button>
                        <button id="kapatButton" class="bg-gray-600 text-white px-4 py-2 rounded">Kapat</button>
                    </div>
                </div>
                <div id="takipFormu" class="p-6"></div>
            </div>
        </div>

        <!-- Firma Y√∂netim Modal -->
        <div id="firmaYonetimModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden no-print">
            <div class="bg-white rounded-lg max-w-2xl w-full max-h-[92vh] overflow-auto">
                <div class="p-4 border-b flex justify-between items-center sticky top-0 bg-white z-10">
                    <h2 class="text-xl font-bold">Firma Y√∂netimi</h2>
                    <button id="firmaModalKapatButton" class="bg-gray-600 text-white px-4 py-2 rounded">Kapat</button>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <h3 class="text-lg font-bold mb-2">Yeni Firma Ekle</h3>
                        <div class="flex gap-2">
                            <input type="text" id="yeniFirmaInput" class="flex-grow px-3 py-2 border rounded" placeholder="Firma adƒ± giriniz">
                            <button id="firmaEkleButton" class="bg-indigo-600 text-white px-4 py-2 rounded">Ekle</button>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold mb-2">Kayƒ±tlƒ± Firmalar</h3>
                        <div id="firmaListesi" class="border rounded-lg p-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LOGIN LOADING OVERLAY -->
        <div id="loginLoading" class="hidden fixed inset-0 bg-black/40 z-50 flex items-center justify-center">
            <div class="bg-white rounded-2xl shadow-2xl p-6 flex items-center gap-4">
                <div class="spinner"></div>
                <div>
                    <div class="font-bold text-gray-800">Giri≈ü yapƒ±lƒ±yor‚Ä¶</div>
                    <div class="text-sm text-gray-500">L√ºtfen bekleyin</div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
        <script src="idb.js"></script>
        <script src="dailyStore.js"></script>
        <script src="errorReporter.js"></script>
        <script src="storage.js"></script>
        <script src="print.js"></script>
        <script src="app.js"></script>
        <script src="piyasa.js"></script>
    </body>
</html>